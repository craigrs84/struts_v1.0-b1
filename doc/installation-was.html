<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/WD-html-in-xml/DTD/xhtml1-strict.dtd">
<html><head><meta name="author" content="dIon Gillard"><title>The Struts Framework Project - Installation - WebSphere Application Server</title></head><body bgcolor="#ffffff" text="#000000" link="#023264" alink="#023264" vlink="#023264"><table border="0" width="100%" cellspacing="5"><tr><td colspan="2"><a href="http://jakarta.apache.org"><img src="images/jakarta-logo.gif" align="left" border="0"></a><img src="images/struts.gif" align="right" border="0"></td></tr><tr><td colspan="2"><hr></td></tr><tr><td width="120" valign="top"><project href="http://jakarta.apache.org/struts" image="images/struts.gif" name="Struts Framework">      <title>Struts Framework</title>      <table border="0" cellspacing="5"><tr><th colspan="2" align="left"><font color><strong>Documentation</strong></font></th></tr>         <tr><td align="center" width="15"></td><td><font size="-1"><a href="index.html">Home</a></font></td></tr>         <tr><td align="center" width="15"></td><td><font size="-1"><a href="installation.html">Installation</a></font></td></tr>  <tr><td align="center" width="15"></td><td><font size="-1"><a href="userGuide/index.html">User Guide (1.0)</a></font></td></tr>         <tr><td align="center" width="15"></td><td><font size="-1"><a href="api/index.html">Javadoc</a></font></td></tr>         <tr><td align="center" width="15"></td><td><font size="-1"><a href="release.html">Release Notes (1.0b1)</a></font></td></tr>         <tr><td align="center" width="15"></td><td><font size="-1"><a href="userGuide/resources.html">Resources</a></font></td></tr>         <tr><td align="center" width="15"></td><td><font size="-1"><a href="todo-1.1.html">TODO List (1.1)</a></font></td></tr>     </table>      <table border="0" cellspacing="5"><tr><th colspan="2" align="left"><font color><strong>Java Developer Guides</strong></font></th></tr>         <tr><td align="center" width="15"></td><td><font size="-1"><a href="api/org/apache/struts/digester/package-summary.html#package_description">Digester</a></font></td></tr>         <tr><td align="center" width="15"></td><td><font size="-1"><a href="api/org/apache/struts/util/package-summary.html#package_description">Utilities</a></font></td></tr>     </table>      <table border="0" cellspacing="5"><tr><th colspan="2" align="left"><font color><strong>Tag Library Guides</strong></font></th></tr>         <tr><td align="center" width="15"></td><td><font size="-1"><a href="api/org/apache/struts/taglib/bean/package-summary.html#package_description">Bean Tags</a></font></td></tr>         <tr><td align="center" width="15"></td><td><font size="-1"><a href="api/org/apache/struts/taglib/html/package-summary.html#package_description">HTML Tags</a></font></td></tr>         <tr><td align="center" width="15"></td><td><font size="-1"><a href="api/org/apache/struts/taglib/logic/package-summary.html#package_description">Logic Tags</a></font></td></tr>         <tr><td align="center" width="15"></td><td><font size="-1"><a href="api/org/apache/struts/taglib/template/package-summary.html#package_description">Template Tags</a></font></td></tr>     </table>      <table border="0" cellspacing="5"><tr><th colspan="2" align="left"><font color><strong>Tag Library Reference</strong></font></th></tr>         <tr><td align="center" width="15"></td><td><font size="-1"><a href="struts-bean.html">Bean Tags</a></font></td></tr>         <tr><td align="center" width="15"></td><td><font size="-1"><a href="struts-html.html">HTML Tags</a></font></td></tr>         <tr><td align="center" width="15"></td><td><font size="-1"><a href="struts-logic.html">Logic Tags</a></font></td></tr>         <tr><td align="center" width="15"></td><td><font size="-1"><a href="struts-template.html">Template Tags</a></font></td></tr>     </table>      <table border="0" cellspacing="5"><tr><th colspan="2" align="left"><font color><strong>Old Documents</strong></font></th></tr>         <tr><td align="center" width="15"></td><td><font size="-1"><a href="tags.html">Tag Library (Old)</a></font></td></tr>         <tr><td align="center" width="15"></td><td><font size="-1"><a href="users_guide.html">User's Guide (Old)</a></font></td></tr>     </table>  </project></td><td valign="top"><body>  <a name="Containers"></a><table border="0" cellspacing="5" cellpadding="5" width="100%"><tr><td bgcolor="#023264"><font color="#ffffff" face="arial,helvetica,sanserif" size="+1"><strong>Installing Struts with your servlet container</strong></font></td></tr><tr><td><blockquote>   <h3><a name="was352">WebSphere Application Server 3.5 FixPack 2</a></h3>  <ul> <li>In the steps below, <code>$WAS_HOME</code> refers to the directory in which you   have installed WebSphere Application Server, and <code>$STRUTS_HOME</code> is the    directory in which you unpacked the Struts binary distribution.  <li>WebSphere before 3.5.2 did not support JSP 1.1 and Servlet 2.2, which    made it difficult to get Struts functioning without massive code changes.    Please upgrade to 3.5.2 (3.5 with FixPack 2)  before attempting to use    Struts. See <a href="http://www.ibm.com/software/webservers/appserv/efix.html">http://www.ibm.com/software/webservers/appserv/efix.html</a>   for download and install instructions on FixPack 2 for WebSphere 3.5   <li>Warning: Struts will not work with WebSphere 3.5.2 out of the box. Fixes    expected to be in WebSphere 3.5.3 (not released at time of writing) should    correct this. However, you can successfully get WebSphere 3.5.2 working    with Struts.   <li>Make sure the WebSphere Application Server is started. Under Windows    NT/2000, it's the &quot;IBM WS AdminServer&quot; service.   <li>Start the WebSphere Administrative Console.  <li>Once it's started, select &quot;Convert a War File&quot; from the tasks toolbar    option, or from the Console-&gt;Tasks menu. This will cause a &quot;Convert War    File&quot; Wizard dialog to appear.   <li>Select a Servlet Engine to host the web application that will result    from converting the War file, e.g. &quot;Default Servlet Engine&quot;, by expanding    the tree control under Nodes. Press the Next button.   <li>Select a Virtual Host to associate the resulting web application with,    e.g. &quot;default host&quot;. Press the Next button.   <li>Press the Browse button and choose the    <code>$STRUTS_HOME/webapps/struts-example.war</code>. Press the Next button   <li>Select a destination directory for the resulting web application, e.g.   <code>$WAS_HOME/hosts/default_host</code>. Press the Next button  <li>Enter a &quot;Web Application Web Path&quot;, e.g. struts-example, and a &quot;Web    Application Name&quot;, e.g. struts-example. Press the Finish button.   <li>You should, after a lengthy pause, get a message box with the text   Command &quot;convert war file&quot; completed successfully. Press Ok.   <li>You now need to add jaxp.jar and a jaxp compatible parser, e.g.    parser.jar from JAXP 1.0.1 to the struts-example web application's    servlets directory, e.g.   <code>$WAS_HOME/AppServer/hosts/default_host/struts-example/servlets</code>   <li>At this point, if WAS 3.5.2 correctly implemented Servlet 2.2, all    would be fine. However, WAS 3.5.2  returns null for calls to    <code>ServletContext.getResource(String)</code> or    <code>ServletContext.getResourceAsStream(String)</code>. This manifests itself as an    exception in the application server stdout log, e.g.    <code>default_server_stdout.log.</code>   <li>Warning: Don't be fooled by the fact that the web application starts    successfully from the Admin Console. It actually doesn't. The Admin    Console is lying. If you try to access the webapp   e.g. <code>http://localhost/struts-example/</code> it will fail.   <li>At this point, you need to patch the Struts source. There are three    places <code>getResourceAsStream</code> is called:</ul>  <pre>
    ResourceTag.doStartTag()
    ActionServlet.initMapping()
    PropertyMessageResources.loadLocale(String)
</pre>    <p>of these, <code>ActionServlet</code> is the most important.<br></p>   <ul><li>Change the source from</ul> <pre>
    // Acquire an input stream to our configuration resource
    InputStream input = getServletContext().getResourceAsStream(config);
</pre> <p>to<br></p> <pre>
    // Acquire an input stream to our configuration resource
    InputStream input = new 
      java.io.FileInputStream(getServletContext().getRealPath(config));
 </pre> <ul><li>  Make similar changes to the other classes if necessary.   <li>Recompile ActionServlet and copy the <code>.class</code> file to <br>  <code>$WAS_HOME/AppServer/hosts/default_host/struts-example/servlets/<br> org/apache/struts/action/ActionServlet.class</code>  <li>Another bug with WAS 3.5.2's classloaders is that Class.getResource()    wont load a resource from a jar, so you must copy<br>   <code>$STRUTS_HOME/lib/struts-config_1_0.dtd</code> <br>   to <br>   <code>$WAS_HOME/AppServer/hosts/default_host/struts-example/servlets/org/apache/struts/resources/struts-config_1_0.dtd</code><br>   or be connected to the Internet to fetch the dtd from the jakarta web site.  <li>Start your webapp in the Admin Console  <li>Test the example application by loading the following URL in your    browser of choice: <a href="http://localhost/struts-example/">http://localhost/struts-example/&quot; &gt;http://localhost/struts-example/</a> </ul>    <hr>   <ul><li>Author: dIon Gillard</ul>   <hr>   <p>Back to <a href="installation.html#Containers">Installation</a><br></p> </blockquote></td></tr></table> </body></td></tr><tr><td colspan="2"><hr></td></tr><tr><td colspan="2"><div align="center"><font color="#023264" size="-1"><em>         Copyright (c) 2000-2001, Apache Software Foundation         </em></font></div><img src="images/struts-power.gif" align="right" border="0"></td></tr></table></body></html>